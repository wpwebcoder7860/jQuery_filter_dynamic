var d=class{constructor(){this.fields=[],this.overrides={}}is_required(t){for(let e in t)this.overrides[e]=this.overrides[e]||{},t[e].required===!1&&(this.overrides[e].skip=!0)}addPattern(t){for(let e in t)this.overrides[e]=this.overrides[e]||{},this.overrides[e].pattern=t[e].pattern,this.overrides[e].patternMessage=t[e].message}addMinLength(t){for(let e in t)this.overrides[e]=this.overrides[e]||{},this.overrides[e].minLength=t[e].minLength}addMaxLength(t){for(let e in t)this.overrides[e]=this.overrides[e]||{},this.overrides[e].maxLength=t[e].maxLength}addMessage(t){for(let e in t){let r=t[e];r.messages&&(this.overrides[e]=this.overrides[e]||{},this.overrides[e].messages=this.overrides[e].messages||{},Object.assign(this.overrides[e].messages,r.messages))}}init(t,e){this.fields=Object.keys(e);let r={},n={};return $.each(this.fields,(a,s)=>{r[s]={},n[s]={};let i=this.overrides[s]||{};if(i.skip?r[s].required=!1:(r[s].required=!0,n[s].required="This field is required."),i.pattern){let o=s+"_pattern";$.validator.addMethod(o,function(h,g){return this.optional(g)||i.pattern.test(h)},i.patternMessage||"Invalid format"),r[s][o]=!0,n[s][o]=i.patternMessage||"Invalid format"}if(i.minLength&&(r[s].minlength=i.minLength,n[s].minlength=i.messages&&i.messages.minlength||`Please enter at least ${i.minLength} characters.`),i.maxLength&&(r[s].maxlength=i.maxLength,n[s].maxlength=i.messages&&i.messages.maxlength||`Please enter no more than ${i.maxLength} characters.`),i.messages)for(let o in i.messages)n[s][o]=i.messages[o]}),$(t).validate({rules:r,messages:n,errorElement:"div",errorClass:"invalid-feedback small fw-normal fs-6",highlight:function(a){$(a).addClass("is-invalid")},unhighlight:function(a){$(a).removeClass("is-invalid")},errorPlacement:function(a,s){a.addClass("invalid-feedback-error"),s.parent(".input-group").length||s.is(":checkbox")||s.is(":radio")?a.insertAfter(s.parent()):a.insertAfter(s)}})}destroy(t){let e=$(t);e.length&&e.data("validator")&&(e.removeData("validator"),e.removeData("unobtrusiveValidation"),e.validate().destroy())}};export{d as formFilter};
